name: "Deploy to Nuget"

on: 
  push:
    branches: [ master ]
    
jobs:

  build:
  
    name: Deploy
    
    runs-on: "windows-latest"
    
    steps:
    - name: Checkout
      uses: actions/checkout@v2
    
    - name: Setup .NET
      uses: actions/setup-dotnet@v1
      with:
        dotnet-version: 4.8.x
                       
    - name: Restore package
      run: dotnet restore NugetFeedTest/HelloWorld/HelloWorld.csproj
      
    - name: Build project
      run: dotnet build NugetFeedTest/HelloWorld/HelloWorld.csproj --no-restore --configuration Release
      
    - name: Pack project
      run: dotnet pack NugetFeedTest/HelloWorld/HelloWorld.csproj --no-restore --no-build --configuration Release --include-symbols --output . #${{ env.PACKAGE_OUTPUT_DIRECTORY }}
      
    - name: Push package
      run: dotnet nuget push *.nupkg -k ${{ secrets.NUGET_API_KEY }} -s https://nuget.pkg.github.com/RaviPrasadOrg/index.json    #${{ env.PACKAGE_OUTPUT_DIRECTORY }}\
